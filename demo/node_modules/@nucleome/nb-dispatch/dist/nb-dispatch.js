!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nb=e():n.nb=e()}(window,(function(){return function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";t.r(e),t.d(e,"dispatch",(function(){return w}));var o={value:function(){}};function r(){for(var n,e=0,t=arguments.length,o={};e<t;++e){if(!(n=arguments[e]+"")||n in o||/[\s.]/.test(n))throw new Error("illegal type: "+n);o[n]=[]}return new i(o)}function i(n){this._=n}function c(n,e){return n.trim().split(/^|\s+/).map((function(n){var t="",o=n.indexOf(".");if(o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:t}}))}function a(n,e){for(var t,o=0,r=n.length;o<r;++o)if((t=n[o]).name===e)return t.value}function s(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=o,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=t&&n.push({name:e,value:t}),n}i.prototype=r.prototype={constructor:i,on:function(n,e){var t,o=this._,r=c(n+"",o),i=-1,u=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<u;)if(t=(n=r[i]).type)o[t]=s(o[t],n.name,e);else if(null==e)for(t in o)o[t]=s(o[t],n.name,null);return this}for(;++i<u;)if((t=(n=r[i]).type)&&(t=a(o[t],n.name)))return t},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new i(n)},call:function(n,e){if((t=arguments.length-2)>0)for(var t,o,r=new Array(t),i=0;i<t;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,t=(o=this._[n]).length;i<t;++i)o[i].value.apply(e,r)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)}};var u=r,f="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),l=new Uint8Array(16);function d(){if(!f)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f(l)}var p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var g=function(n){return"string"==typeof n&&p.test(n)},h=[],y=0;y<256;++y)h.push((y+256).toString(16).substr(1));var v=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(h[n[e+0]]+h[n[e+1]]+h[n[e+2]]+h[n[e+3]]+"-"+h[n[e+4]]+h[n[e+5]]+"-"+h[n[e+6]]+h[n[e+7]]+"-"+h[n[e+8]]+h[n[e+9]]+"-"+h[n[e+10]]+h[n[e+11]]+h[n[e+12]]+h[n[e+13]]+h[n[e+14]]+h[n[e+15]]).toLowerCase();if(!g(t))throw TypeError("Stringified UUID is invalid");return t};var m=function(n,e,t){var o=(n=n||{}).random||(n.rng||d)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=o[r];return e}return v(o)},w=function(){var n,e="djcdicpaejhpgncicoglfckiappkoeof",t="cnbChan01",o={connection:"No Connection",id:""},r=u("sendMessage","receiveMessage","_disconnect");r.on("_disconnect.status",(function(){o.connection="No Connection",o.id=""}));var i=["update","brush"];n=arguments.length>0?u.apply(this,arguments):u.apply(this,i);var c=function(){},a=function(){c()},s=function(){};return s.connect=function(n){b(t,e,r,o,"function"==typeof n?function(e){c(),n(e)}:function(n){c()},a)},s.disconnect=function(n){r.call("_disconnect",this,{})},s.close=function(n){r.call("_disconnect",this,{})},s.dispatch=function(){return r},s.extId=function(n){return arguments.length?(e=n,s):e},s.chanId=function(n){return arguments.length?(t=n,s):t},s.status=function(){return o},s.onchange=function(n){return arguments.length?(c=n,s):c},s.on=function(e,t){e.split(" ").forEach((function(e){var o=e.split(".")[0]||"";0!=o.length&&("sendMessage"===o||"receiveMessage"===o?r.on(e,t):null==t?(r.on("receiveMessage".concat(".").concat(e),t),n.on(e,t)):(r.on("receiveMessage".concat(".").concat(e),(function(n){if("string"==typeof n)try{var e=JSON.parse(n);e.code&&e.code===o&&(e.data&&"string"==typeof e.data?t(JSON.parse(e.data)):t(e.data))}catch(n){}else n.code===o&&t(JSON.parse(n.data))})),n.on(e,(function(n){t(n)}))))}))},s.call=function(e,t,o){"sendMessage"===e||"receiveMessage"===e?r.call(e,t,o):(r.call("sendMessage",t,{code:e,data:JSON.stringify(o),_uuid_:m()}),n.call(e,t,o))},s};function b(n,e,t,o,r,i){var c=e,a=n,s=function(){!function(n,e,t,o,r){try{var i=new BroadcastChannel(n);e.on("sendMessage.chan",(function(n){i.postMessage(n)})),i.onmessage=function(n){var t=n.data;e.call("receiveMessage",this,t)},e.on("_disconnect",(function(n){e.on("sendMessage.chan",null),i.close(),r()})),t.connection="Channel",t.id=n,o(t)}catch(n){console.log("your browser doesn't support BroadCastChannel"),t.connection="No Connection",t.id="",o(t)}}(a,t,o,r,i)};try{window.chrome.runtime.sendMessage(c,{message:"version"},(function(n){n?n.version&&u():s()}))}catch(n){s()}var u=function(){!function(n,e,t,o,r,i){var c=window.chrome.runtime.connect(n);c.postMessage({chanId:e}),t.on("sendMessage.apps",(function(n){c.postMessage(n)})),c.onMessage.addListener((function(n){var e={...n,data:JSON.stringify(n.data)};t.call("receiveMessage",this,e)})),c.onDisconnect.addListener((function(e){console.log("disconnect to extension ",n),t.on("sendMessage.apps",null),i()})),t.on("_disconnect",(function(e){console.log("disconnect to extension ",n),t.on("sendMessage.apps",null),i(),c.disconnect()})),o.connection="Extension",o.id=n,r(o)}(e,n,t,o,r,i)}}}])}));